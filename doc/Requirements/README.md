# NavigationApp/docs/Requirements

| version | date      | description |
| ------- | --------- | ----------- |
| 1.0.0   | 2022/4/17 | 新規作成    |

## システム概要図

![system_summary](/img/requirements/system_summary.png)

## 背景

- 運動不足解消のために walking をする

## 要求

- 出発点と終点を設定すると walking のための経路を案内してほしい
  - 最短距離を表示するのではなく, 3 段階でのルートを示し選択したい(少ない・普通・多い)
- リアルタイムに消費カロリー・消費体重を見たい
  - 歩いた距離を算出し, 現在の消費カロリーを表示させたい
  - カロリーを体重に換算してわかりやすくしたい
- 累計で消費カロリー・消費体重を見たい
- ユーザごとに歩いた距離を保存しておき,リクエストがあったときは累計消費カロリーのページを表示する

## ユースケース

![system_usecase](/img/requirements/system_usecase.png)

## 機能要件

## 機能

- 経路を表示
  - 経路情報を取得
    - Google Maps API KEY をセットする
    - direction API に Get を要求する
    - 経路情報を取得する
  - 経路情報を描写
  - 選択された経路を設定
    - User がルートを選択
    - 選択されたルートを設定
- リアルタイム消費カロリー・体重を表示
  - 移動した(歩いた)距離を計測する
  - 消費カロリー(kcal) = 体重(kg) × 移動距離(km) を計測する
  - 消費体重(Kg) = 消費カロリー(kcal) ÷ 7000 を計測する
- 累計消費カロリー・体重を表示
  - 体重を設定する
  - 累計消費カロリー(kcal) = 体重(kg) × 累計移動距離(km) を計測する
  - 累計消費体重(Kg) = 累計消費カロリー(kcal) ÷ 7000 を計測する
- データ保存
  - 出発点から終点に到達したらデータを保存する
    - 時間 (timestamp)
    - 移動距離
  - 終点に到達する前に辞めた場合やコースを外れた場合も進んだ分だけ同様のデータを保存する
  - エラー系
    - 何らかしらの問題が生じてうまくデータベースに接続できない時には iOS に一時データの保存ファイルを作成する
    - データベースに接続できたら送信する

## 画面

- sign up 画面
  - ユーザ名・password を入力するフォーム
- ログイン画面
  - ユーザ名・password を入力するフォーム
- プロフィール画面
  - 自身のユーザ名パスワード体重を変更できる
  - 累計消費カロリー・体重を表示
- Navigation(main)画面
  - 出発点・終点を設定
  - 経路を 3 つ推薦
  - 経路選択
  - 経路描写

## データ

User Table

| UserId  | User        | weight | moveId  |
| ------- | ----------- | ------ | ------- |
| int     | varchar(10) | float  | int     |
| primary | not null    |        | foreign |

Movement Table

| moveId  | start    | end      | movement |
| ------- | -------- | -------- | -------- |
| int     | datetime | datetime | float    |
| primary | not null | not null | not null |

## 非機能要件

## ユーザビリティ

痩せたい・健康管理したい人が歩き, 消費カロリーや消費体重を管理するための APP

## 信頼性

24 時間 full 稼働

## その他

性能・拡張性・継続性に関してはサンプルプロジェクトなので定義しない

2 週間アプリ(サービス)を継続できればよいものとする

## 情報セキュリティ

- iOS
  - API key の流出
- データベース
  - GCP におまかせ
